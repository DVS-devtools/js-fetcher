parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"l8pq":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];function n(t){var n,e,i,o,u,c,l=Object.create(null);if(this[a]=l,t)if("string"==typeof t)for("?"===t.charAt(0)&&(t=t.slice(1)),u=0,c=(o=t.split("&")).length;u<c;u++)-1<(n=(i=o[u]).indexOf("="))?s(l,h(i.slice(0,n)),h(i.slice(n+1))):i.length&&s(l,h(i),"");else if(r(t))for(u=0,c=t.length;u<c;u++)s(l,(i=t[u])[0],i[1]);else if(t.forEach)t.forEach(f,l);else for(e in t)s(l,e,t[e])}var r=Array.isArray,e=n.prototype,i=/[!'\(\)~]|%20|%00/g,o=/\+/g,u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},c=function(t){return u[t]},a="__URLSearchParams__:"+Math.random();function f(t,n){s(this,n,t)}function s(t,n,e){var i=r(e)?e.join(","):e;n in t?t[n].push(i):t[n]=[i]}function h(t){return decodeURIComponent(t.replace(o," "))}function l(t){return encodeURIComponent(t).replace(i,c)}e.append=function(t,n){s(this[a],t,n)},e.delete=function(t){delete this[a][t]},e.get=function(t){var n=this[a];return t in n?n[t][0]:null},e.getAll=function(t){var n=this[a];return t in n?n[t].slice(0):[]},e.has=function(t){return t in this[a]},e.set=function(t,n){this[a][t]=[""+n]},e.forEach=function(t,n){var r=this[a];Object.getOwnPropertyNames(r).forEach(function(e){r[e].forEach(function(r){t.call(n,r,e,this)},this)},this)},e.toJSON=function(){return{}},e.toString=function(){var t,n,r,e,i=this[a],o=[];for(n in i)for(r=l(n),t=0,e=i[n];t<e.length;t++)o.push(r+"="+l(e[t]));return o.join("&")},function(t){var n=function(){try{return!!Symbol.iterator}catch(t){return!1}}();"forEach"in t||(t.forEach=function(t,n){var r=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(e){!e.length||e in r||(r[e]=this.getAll(e)).forEach(function(r){t.call(n,r,e,this)},this)},this)}),"keys"in t||(t.keys=function(){var t=[];this.forEach(function(n,r){t.push(r)});var r={next:function(){var n=t.shift();return{done:void 0===n,value:n}}};return n&&(r[Symbol.iterator]=function(){return r}),r}),"values"in t||(t.values=function(){var t=[];this.forEach(function(n){t.push(n)});var r={next:function(){var n=t.shift();return{done:void 0===n,value:n}}};return n&&(r[Symbol.iterator]=function(){return r}),r}),"entries"in t||(t.entries=function(){var t=[];this.forEach(function(n,r){t.push([r,n])});var r={next:function(){var n=t.shift();return{done:void 0===n,value:n}}};return n&&(r[Symbol.iterator]=function(){return r}),r}),!n||Symbol.iterator in t||(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=function(){for(var t,n,r,e=this.entries(),i=e.next(),o=i.done,u=[],c=Object.create(null);!o;)n=(r=i.value)[0],u.push(n),n in c||(c[n]=[]),c[n].push(r[1]),o=(i=e.next()).done;for(u.sort(),t=0;t<u.length;t++)this.delete(u[t]);for(t=0;t<u.length;t++)n=u[t],this.append(n,c[n].shift())})}((n=module.exports=t.URLSearchParams||n).prototype);
},{}],"jWsf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseResponse=r,exports.isAbsoluteUrl=n,exports.compose=s;var e=t(require("url-search-params"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e){return e.json()}function n(e){return/(https?)?:?\/\//g.test(e)}function s(t,r){var n=t.split("?"),s=n[0],o=n.length>0?n[1]:"",u=new e.default(o);return Object.keys(r).forEach(function(e){u.set(e,r[e])}),"".concat(s,"?").concat(u.toString())}
},{"url-search-params":"l8pq"}],"eJQ5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../utils/index");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}var r=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.baseURL,r=void 0===o?window.location.origin:o,i=e.options,h=void 0===i?{}:i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t(this,n),this.baseURL=r,this.options=h,this.tokenGenerator=a,this.normalizeURL=this.normalizeURL.bind(this),this.refreshToken=this.refreshToken.bind(this)}return o(n,[{key:"setTokenGenerator",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&"function"==typeof e.generate?this.tokenGenerator=e:this.tokenGenerator=null}},{key:"normalizeURL",value:function(t){if(!t)throw new Error("Not valid url given");return(0,e.isAbsoluteUrl)(t)?t:this.baseURL+t}},{key:"performFetch",value:function(t,n,o,r){var i=this,h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return this.refreshToken().then(function(){return fetch(i.normalizeURL((0,e.compose)(t,n)),Object.assign({},i.options,o,{method:r}))}).then(function(t){return h?(0,e.parseResponse)(t):t})}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.performFetch(e,t,n,"GET",o)}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.performFetch(e,t,n,"POST",o)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.performFetch(e,t,n,"HEAD",o)}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.performFetch(e,t,n,"PUT",o)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.performFetch(e,t,n,"DELETE",o)}},{key:"refreshToken",value:function(){var e=this;return this.tokenGenerator?this.tokenGenerator.generate().then(function(t){t?e.options.headers.Authorization="Bearer ".concat(t):delete e.options.headers.Authorization}).catch(function(){return delete e.options.headers.Authorization,Promise.resolve()}):Promise.resolve()}}]),n}(),i=r;exports.default=i;
},{"../utils/index":"jWsf"}],"/zHl":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.url,i=void 0===r?window.location.origin:r,l=n.clientId,o=n.clientSecret;e(this,t),this.currentCall=null,this.expire=Date.now()-1e3,this.token=null,this.url=i,Object.defineProperty(this,"clientId",{value:l,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(this,"clientSecret",{value:o,writable:!1,enumerable:!1,configurable:!1}),this.isExpired=this.isExpired.bind(this)}return n(t,[{key:"isExpired",value:function(){return Date.now()>=this.expire}},{key:"generate",value:function(){var e=this;return this.isExpired()?this.currentCall?this.currentCall:(this.currentCall=fetch(this.url,{method:"POST",credentials:"include",headers:{"content-type":"application/x-www-form-urlencoded"},body:"k=".concat(this.clientId,"&s=").concat(this.clientSecret)}).then(function(e){return e.json()}).then(function(t){return t.token?(e.currentCall=null,e.token=t.token,e.expire=t.expire,e.token):null}).catch(function(t){throw e.currentCall=null,t}),this.currentCall):Promise.resolve(this.token)}}]),t}(),i=r;exports.default=i;
},{}],"Focm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={Fetcher:!0,TokenGenerator:!0};Object.defineProperty(exports,"TokenGenerator",{enumerable:!0,get:function(){return t.default}}),exports.Fetcher=exports.default=void 0;var r=u(require("./Fetcher")),t=u(require("./TokenGenerator")),o=require("./utils");function u(e){return e&&e.__esModule?e:{default:e}}Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});var n=r.default;exports.default=n;var a=r.default;exports.Fetcher=a;
},{"./Fetcher":"eJQ5","./TokenGenerator":"/zHl","./utils":"jWsf"}]},{},["Focm"], "JsFetcher")
//# sourceMappingURL=/index.umd.map